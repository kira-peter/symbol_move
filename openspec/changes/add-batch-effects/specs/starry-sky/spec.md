# 星空闪烁特效规格

## 特效 ID
starry-sky

## 概述
模拟夜空中星星随机闪烁的效果，使用不同亮度的字符表现星星的明暗变化。

## 需求

### R1: 基础渲染
星空特效应在终端中渲染静态和动态的星星。

**场景**：
- S1.1 初始化时，随机在终端中生成一定数量的星星
- S1.2 每颗星星使用字符 `*`、`·` 或 `.` 表示
- S1.3 星星分布应均匀但随机
- S1.4 星星总数应根据终端大小自动计算（约占总字符数的 1-3%）

### R2: 闪烁动画
星星应呈现明暗变化的闪烁效果。

**场景**：
- S2.1 每颗星星独立控制闪烁周期
- S2.2 闪烁通过改变字符颜色和亮度实现
- S2.3 亮度级别：暗（灰色）→ 中（白色）→ 亮（亮白）→ 中 → 暗
- S2.4 闪烁周期为 1-5 秒（随机）
- S2.5 使用平滑过渡而非突变

### R3: 星星密度
支持调整星星密度。

**场景**：
- S3.1 稀疏模式：约 1% 覆盖率
- S3.2 中等模式：约 2% 覆盖率
- S3.3 密集模式：约 3% 覆盖率

### R4: 颜色主题
支持不同的颜色主题。

**场景**：
- S4.1 经典模式：白色星星
- S4.2 彩色模式：星星随机使用淡蓝、淡黄、淡红等颜色
- S4.3 蓝色主题：仅使用蓝色系星星

### R5: 性能要求
特效应流畅运行且资源占用低。

**场景**：
- S5.1 目标帧率：30 FPS
- S5.2 CPU 占用应 < 20%
- S5.3 内存占用应 < 10 MB
- S5.4 支持终端大小从 80x24 到 200x60

### R6: 用户交互
特效应支持基本的用户控制。

**场景**：
- S6.1 按 ESC 键退出特效
- S6.2 终端大小调整时自动重新计算星星位置
- S6.3 支持 Ctrl+C 强制退出

### R7: 代码质量
代码应清晰、可维护。

**场景**：
- S7.1 实现 Effect 接口
- S7.2 使用 init() 自动注册特效
- S7.3 支持配置化（密度、主题）
- S7.4 适当的错误处理
- S7.5 代码注释清晰

### R8: 扩展性
为未来扩展预留空间。

**场景**：
- S8.1 支持添加流星效果（可选）
- S8.2 支持添加星座连线（可选）
- S8.3 配置应易于扩展

## 技术约束
- 使用 tcell 库进行终端控制
- 使用 Go 标准库的 math/rand 生成随机数
- 帧率控制使用 time.Ticker
- 避免使用复杂的物理计算

## 参考实现
参考 matrix-rain 特效的架构：
- Config 结构定义配置
- Star 结构表示单个星星的状态
- StarrySky 主结构管理所有星星
- Effect 接口实现
- 自动注册机制
